<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
      <div class="card shadow-lg border-0">
        <div class="card-header bg-success text-white text-center py-4">
          <h2 class="mb-0">
            <i class="fas fa-sign-in-alt me-2"></i>
            تسجيل الدخول
          </h2>
          <p class="mb-0 mt-2">مرحباً بعودتك إلى منصتنا</p>
        </div>

        <div class="card-body p-5">
          <%= form_for(resource, as: resource_name, url: session_path(resource_name),
                      html: { class: "needs-validation", novalidate: true }) do |f| %>

            <div class="mb-4">
              <%= f.label :email, "البريد الإلكتروني", class: "form-label fw-bold text-success" %>
              <div class="input-group">
                <span class="input-group-text bg-light border-end-0">
                  <i class="fas fa-envelope text-success"></i>
                </span>
                <%= f.email_field :email, class: "form-control ps-0", required: true,
                                 placeholder: "example@email.com" %>
              </div>
            </div>

            <div class="mb-4">
              <%= f.label :password, "كلمة المرور", class: "form-label fw-bold text-success" %>
              <div class="input-group">
                <span class="input-group-text bg-light border-end-0">
                  <i class="fas fa-lock text-success"></i>
                </span>
                <%= f.password_field :password, class: "form-control ps-0", required: true,
                                    placeholder: "أدخل كلمة المرور" %>
                <button type="button" class="btn btn-outline-secondary toggle-password">
                  <i class="fas fa-eye"></i>
                </button>
              </div>
            </div>

            <% if devise_mapping.rememberable? %>
              <div class="form-check mb-4">
                <%= f.check_box :remember_me, class: "form-check-input" %>
                <%= f.label :remember_me, "تذكرني", class: "form-check-label text-muted" %>
              </div>
            <% end %>

            <div class="d-grid mb-3">
              <%= f.submit "تسجيل الدخول", class: "btn btn-success btn-lg fw-bold" %>
            </div>

            <div class="text-center mb-3">
              <%= link_to "نسيت كلمة المرور؟", new_user_password_path, class: "text-success text-decoration-none" %>
            </div>
          <% end %>

          <hr class="my-4">

          <div class="text-center">
            <p class="text-muted mb-3">أو سجل الدخول باستخدام</p>
            <div class="d-grid gap-2">
              <button class="btn btn-outline-primary">
                <i class="fab fa-google me-2"></i>جوجل
              </button>
              <button class="btn btn-outline-dark">
                <i class="fab fa-facebook me-2"></i>فيسبوك
              </button>
            </div>
          </div>

          <hr class="my-4">

          <div class="text-center">
            <p class="text-muted mb-2">ليس لديك حساب؟</p>
            <%= link_to "إنشاء حساب جديد", new_user_registration_path, class: "btn btn-outline-success" %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.card {
  border-radius: 15px;
  overflow: hidden;
}

.card-header {
  border-radius: 15px 15px 0 0 !important;
}

.btn-success {
  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
  border: none;
}

.btn-success:hover {
  background: linear-gradient(135deg, #218838 0%, #1aa179 100%);
  transform: translateY(-2px);
}

.form-control:focus {
  border-color: #28a745;
  box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);
}

.toggle-password {
  border-left: none;
}

.input-group-text {
  background-color: #f8f9fa;
  border-right: none;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // إظهار/إخفاء كلمة المرور
  document.querySelectorAll('.toggle-password').forEach(button => {
    button.addEventListener('click', function() {
      const input = this.closest('.input-group').querySelector('input');
      const icon = this.querySelector('i');

      if (input.type === 'password') {
        input.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
      } else {
        input.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
      }
    });
  });

  // التحقق من صحة النموذج
  const forms = document.querySelectorAll('.needs-validation');
  Array.from(forms).forEach(form => {
    form.addEventListener('submit', event => {
      if (!form.checkValidity()) {
        event.preventDefault();
        event.stopPropagation();
      }
      form.classList.add('was-validated');
    }, false);
  });
});
</script>
